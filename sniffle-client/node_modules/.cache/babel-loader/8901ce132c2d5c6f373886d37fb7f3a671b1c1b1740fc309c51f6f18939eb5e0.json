{"ast":null,"code":"import _regeneratorRuntime from\"/Users/lironds/Documents/FullStack/HackerU/Projects/sniffle/sniffle-client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/lironds/Documents/FullStack/HackerU/Projects/sniffle/sniffle-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{successMsg}from\"./feedbacksServices\";var api=\"\".concat(process.env.REACT_APP_API,\"/favorites\");export function getFav(userId){return axios.get(api,{headers:{Authorization:JSON.parse(sessionStorage.getItem(\"token\")).token},data:{userId:userId}});}export function updateFav(_x){return _updateFav.apply(this,arguments);}function _updateFav(){_updateFav=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(cardToAdd){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(api,cardToAdd,{headers:{Authorization:JSON.parse(sessionStorage.getItem(\"token\")).token}});case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);throw _context.t0;case 9:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return _updateFav.apply(this,arguments);}export function addOrRemoveCard(_x2){return _addOrRemoveCard.apply(this,arguments);}function _addOrRemoveCard(){_addOrRemoveCard=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(cardToAdd){var response,_response$data,action,message;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return updateFav(cardToAdd);case 3:response=_context2.sent;_response$data=response.data,action=_response$data.action,message=_response$data.message;if(response.status===200||201){////if added to fav\nif(action===\"add\"){successMsg(\"Card added to favorites\");/////if removed from fav\n}else if(action===\"remove\"){successMsg(\"Card removed from favorites\");// Show a success message or update your UI here\n}}_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.error(\"An error occurred\",_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return _addOrRemoveCard.apply(this,arguments);}","map":{"version":3,"names":["axios","successMsg","api","concat","process","env","REACT_APP_API","getFav","userId","get","headers","Authorization","JSON","parse","sessionStorage","getItem","token","data","updateFav","_x","_updateFav","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","cardToAdd","wrap","_callee$","_context","prev","next","post","abrupt","sent","t0","stop","addOrRemoveCard","_x2","_addOrRemoveCard","_callee2","response","_response$data","action","message","_callee2$","_context2","status","console","error"],"sources":["/Users/lironds/Documents/FullStack/HackerU/Projects/sniffle/sniffle-client/src/services/favServices.ts"],"sourcesContent":["import axios from \"axios\";\nimport Card from \"../interfaces/Card\";\nimport { successMsg } from \"./feedbacksServices\";\n\nlet api: string = `${process.env.REACT_APP_API}/favorites`;\n\nexport function getFav(userId: string) {\n  return axios.get(api, {\n    headers: {\n      Authorization: JSON.parse(sessionStorage.getItem(\"token\") as string).token,\n    },\n    data: {\n      userId: userId,\n    },\n  });\n}\n\nexport async function updateFav(cardToAdd: Card) {\n  try {\n    return await axios.post(api, cardToAdd, {\n      headers: {\n        Authorization: JSON.parse(sessionStorage.getItem(\"token\") as string).token,\n      },\n    });\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function addOrRemoveCard(cardToAdd: Card) {\n  try {\n    const response = await updateFav(cardToAdd);\n    const { action, message } = response.data;\n\n    if (response.status === 200 || 201) {\n      ////if added to fav\n      if (action === \"add\") {\n        successMsg(\"Card added to favorites\");\n        /////if removed from fav\n      } else if (action === \"remove\") {\n        successMsg(\"Card removed from favorites\");\n        // Show a success message or update your UI here\n      }\n    }\n  } catch (error) {\n    console.error(\"An error occurred\", error);\n  }\n}\n"],"mappings":"gVAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,OAASC,UAAU,KAAQ,qBAAqB,CAEhD,GAAI,CAAAC,GAAW,IAAAC,MAAA,CAAMC,OAAO,CAACC,GAAG,CAACC,aAAa,cAAY,CAE1D,MAAO,SAAS,CAAAC,MAAMA,CAACC,MAAc,CAAE,CACrC,MAAO,CAAAR,KAAK,CAACS,GAAG,CAACP,GAAG,CAAE,CACpBQ,OAAO,CAAE,CACPC,aAAa,CAAEC,IAAI,CAACC,KAAK,CAACC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAW,CAAC,CAACC,KACvE,CAAC,CACDC,IAAI,CAAE,CACJT,MAAM,CAAEA,MACV,CACF,CAAC,CAAC,CACJ,CAEA,eAAsB,CAAAU,SAASA,CAAAC,EAAA,SAAAC,UAAA,CAAAC,KAAA,MAAAC,SAAA,GAU9B,SAAAF,WAAA,EAAAA,UAAA,CAAAG,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAVM,SAAAC,QAAyBC,SAAe,SAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAE9B,CAAAhC,KAAK,CAACiC,IAAI,CAAC/B,GAAG,CAAEyB,SAAS,CAAE,CACtCjB,OAAO,CAAE,CACPC,aAAa,CAAEC,IAAI,CAACC,KAAK,CAACC,cAAc,CAACC,OAAO,CAAC,OAAO,CAAW,CAAC,CAACC,KACvE,CACF,CAAC,CAAC,eAAAc,QAAA,CAAAI,MAAA,UAAAJ,QAAA,CAAAK,IAAA,SAAAL,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAM,EAAA,CAAAN,QAAA,mBAAAA,QAAA,CAAAM,EAAA,yBAAAN,QAAA,CAAAO,IAAA,MAAAX,OAAA,gBAIL,UAAAN,UAAA,CAAAC,KAAA,MAAAC,SAAA,GAED,eAAsB,CAAAgB,eAAeA,CAAAC,GAAA,SAAAC,gBAAA,CAAAnB,KAAA,MAAAC,SAAA,GAkBpC,SAAAkB,iBAAA,EAAAA,gBAAA,CAAAjB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAlBM,SAAAgB,SAA+Bd,SAAe,MAAAe,QAAA,CAAAC,cAAA,CAAAC,MAAA,CAAAC,OAAA,QAAArB,mBAAA,GAAAI,IAAA,UAAAkB,UAAAC,SAAA,iBAAAA,SAAA,CAAAhB,IAAA,CAAAgB,SAAA,CAAAf,IAAA,SAAAe,SAAA,CAAAhB,IAAA,GAAAgB,SAAA,CAAAf,IAAA,SAE1B,CAAAd,SAAS,CAACS,SAAS,CAAC,QAArCe,QAAQ,CAAAK,SAAA,CAAAZ,IAAA,CAAAQ,cAAA,CACcD,QAAQ,CAACzB,IAAI,CAAjC2B,MAAM,CAAAD,cAAA,CAANC,MAAM,CAAEC,OAAO,CAAAF,cAAA,CAAPE,OAAO,CAEvB,GAAIH,QAAQ,CAACM,MAAM,GAAK,GAAG,EAAI,GAAG,CAAE,CAClC;AACA,GAAIJ,MAAM,GAAK,KAAK,CAAE,CACpB3C,UAAU,CAAC,yBAAyB,CAAC,CACrC;AACF,CAAC,IAAM,IAAI2C,MAAM,GAAK,QAAQ,CAAE,CAC9B3C,UAAU,CAAC,6BAA6B,CAAC,CACzC;AACF,CACF,CAAC8C,SAAA,CAAAf,IAAA,iBAAAe,SAAA,CAAAhB,IAAA,GAAAgB,SAAA,CAAAX,EAAA,CAAAW,SAAA,aAEDE,OAAO,CAACC,KAAK,CAAC,mBAAmB,CAAAH,SAAA,CAAAX,EAAO,CAAC,CAAC,yBAAAW,SAAA,CAAAV,IAAA,MAAAI,QAAA,gBAE7C,UAAAD,gBAAA,CAAAnB,KAAA,MAAAC,SAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import{useFormik}from\"formik\";import*as yup from\"yup\";import{checkUser,getTokenDetails}from\"../services/usersServices\";import{useNavigate}from\"react-router-dom\";import{errorMsg,successMsg}from\"../services/feedbacksServices\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Login=function Login(_ref){var setUserInfo=_ref.setUserInfo,userInfo=_ref.userInfo;var navigate=useNavigate();var formik=useFormik({initialValues:{email:\"\",password:\"\"},validationSchema:yup.object({email:yup.string().required().email(),password:yup.string().required()}),onSubmit:function onSubmit(values){checkUser(values).then(function(res){navigate(\"/\");successMsg(\"You're logged in as \".concat(values.email));sessionStorage.setItem(\"token\",JSON.stringify({token:res.data}));sessionStorage.setItem(\"userInfo\",JSON.stringify({email:getTokenDetails().email,role:getTokenDetails().role,_id:getTokenDetails()._id}));setUserInfo(JSON.parse(sessionStorage.getItem(\"userInfo\")));}).catch(function(err){return errorMsg(\"Wrong email or password\");});}});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid col-md-6 p-5\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"text-center p-2 border border-info border-5 rounded-3\",onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"display-3 bg-info\",children:\"LOGIN\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"floatingInput\",placeholder:\"name@example.com\",name:\"email\",value:formik.values.email,onChange:formik.handleChange,onBlur:formik.handleBlur}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingInput\",children:\"Email address\"}),formik.touched.email&&formik.errors.email&&/*#__PURE__*/_jsx(\"small\",{className:\"text-danger\",children:formik.errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3 col\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"password\",name:\"password\",value:formik.values.password,onChange:formik.handleChange,onBlur:formik.handleBlur}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"password\"}),formik.touched.password&&formik.errors.password&&/*#__PURE__*/_jsx(\"small\",{className:\"text-danger\",children:formik.errors.password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row px-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"reset\",className:\"btn btn-success col me-1\",onClick:function onClick(){return formik.resetForm();},children:\"RESET FORM\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger col\",onClick:function onClick(){return navigate(-1);},children:\"CANCEL\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row p-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:!formik.isValid||!formik.dirty,children:\"LOGIN\"})})]})})});return/*#__PURE__*/_jsx(_Fragment,{children:\"This is Login\"});};export default Login;","map":{"version":3,"names":["useFormik","yup","checkUser","getTokenDetails","useNavigate","errorMsg","successMsg","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_ref","setUserInfo","userInfo","navigate","formik","initialValues","email","password","validationSchema","object","string","required","onSubmit","values","then","res","concat","sessionStorage","setItem","JSON","stringify","token","data","role","_id","parse","getItem","catch","err","children","className","handleSubmit","type","id","placeholder","name","value","onChange","handleChange","onBlur","handleBlur","htmlFor","touched","errors","onClick","resetForm","disabled","isValid","dirty"],"sources":["/Users/lironds/Documents/FullStack/HackerU/Projects/sniffle/sniffle-client/src/components/Login.tsx"],"sourcesContent":["import { useFormik } from \"formik\";\nimport { FunctionComponent } from \"react\";\nimport * as yup from \"yup\";\nimport { checkUser, getTokenDetails } from \"../services/usersServices\";\nimport { useNavigate } from \"react-router-dom\";\nimport { errorMsg, successMsg } from \"../services/feedbacksServices\";\nimport User from \"../interfaces/User\";\n\ntype userLogin = Pick<User, \"email\" | \"password\">;\n\ninterface LoginProps {\n  setUserInfo: Function;\n  userInfo: any;\n}\n\nconst Login: FunctionComponent<LoginProps> = ({ setUserInfo, userInfo }) => {\n  let navigate = useNavigate();\n  let formik = useFormik<userLogin>({\n    initialValues: {\n      email: \"\",\n      password: \"\",\n    },\n    validationSchema: yup.object({\n      email: yup.string().required().email(),\n      password: yup.string().required(),\n    }),\n    onSubmit(values) {\n      checkUser(values)\n        .then((res) => {\n          navigate(\"/\");\n          successMsg(`You're logged in as ${values.email}`);\n          sessionStorage.setItem(\n            \"token\",\n\n            JSON.stringify({\n              token: res.data,\n            })\n          );\n\n          sessionStorage.setItem(\n            \"userInfo\",\n            JSON.stringify({\n              email: (getTokenDetails() as any).email,\n              role: (getTokenDetails() as any).role,\n              _id: (getTokenDetails() as any)._id,\n            })\n          );\n          setUserInfo(JSON.parse(sessionStorage.getItem(\"userInfo\") as string));\n        })\n        .catch((err) => errorMsg(\"Wrong email or password\"));\n    },\n  });\n  return (\n    <>\n      <div className=\"container-fluid col-md-6 p-5\">\n        {/***** form *******/}\n        <form\n          className=\"text-center p-2 border border-info border-5 rounded-3\"\n          onSubmit={formik.handleSubmit}\n        >\n          <h3 className=\"display-3 bg-info\">LOGIN</h3>\n\n          <div className=\"form-floating mb-3\">\n            <input\n              type=\"email\"\n              className=\"form-control\"\n              id=\"floatingInput\"\n              placeholder=\"name@example.com\"\n              name=\"email\"\n              value={formik.values.email}\n              onChange={formik.handleChange}\n              onBlur={formik.handleBlur}\n            />\n            <label htmlFor=\"floatingInput\">Email address</label>\n            {formik.touched.email && formik.errors.email && (\n              <small className=\"text-danger\">{formik.errors.email}</small>\n            )}\n          </div>\n          <div className=\"form-floating mb-3 col\">\n            <input\n              type=\"password\"\n              className=\"form-control\"\n              id=\"password\"\n              placeholder=\"password\"\n              name=\"password\"\n              value={formik.values.password}\n              onChange={formik.handleChange}\n              onBlur={formik.handleBlur}\n            />\n            <label htmlFor=\"password\">password</label>\n            {formik.touched.password && formik.errors.password && (\n              <small className=\"text-danger\">{formik.errors.password}</small>\n            )}\n          </div>\n\n          <div className=\"row px-2\">\n            <button\n              type=\"reset\"\n              className=\"btn btn-success col me-1\"\n              onClick={() => formik.resetForm()}\n            >\n              RESET FORM\n            </button>\n            <button type=\"button\" className=\"btn btn-danger col\" onClick={() => navigate(-1)}>\n              CANCEL\n            </button>\n          </div>\n          <div className=\"row p-2\">\n            <button\n              type=\"submit\"\n              className=\"btn btn-primary\"\n              disabled={!formik.isValid || !formik.dirty}\n            >\n              LOGIN\n            </button>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n\n  return <>This is Login</>;\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
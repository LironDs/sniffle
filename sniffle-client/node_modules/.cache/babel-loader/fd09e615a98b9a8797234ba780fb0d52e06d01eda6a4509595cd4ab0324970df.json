{"ast":null,"code":"import _slicedToArray from\"/Users/lironds/Documents/FullStack/HackerU/Projects/sniffle/sniffle-client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import{deleteUser,getUsers}from\"../services/usersServices\";import{successMsg}from\"../services/feedbacksServices\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Crm=function Crm(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),usersChanged=_useState4[0],setUsersChanged=_useState4[1];var render=function render(){setUsersChanged(!usersChanged);};useEffect(function(){getUsers().then(function(res){return setUsers(res.data);}).catch(function(err){return console.log(err);});},[usersChanged]);var handleDelete=function handleDelete(user){if(window.confirm(\"Are you sure you want to delete this user?\")){deleteUser(user._id).then(function(res){successMsg(\"User removed successfully\");render();}).catch(function(err){return console.log(err);});}};return/*#__PURE__*/_jsx(_Fragment,{children:users.length?/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"table-success\",children:[/*#__PURE__*/_jsx(\"td\",{children:\"User Id\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Mail\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"td\",{children:\"role\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Edit User\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Delete User\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(user){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.firstName}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:user.password}),/*#__PURE__*/_jsx(\"td\",{children:user.role}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/users/user-profile/\".concat(user._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-regular fa-pen-to-square\"})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"\",onClick:function onClick(){return handleDelete(user);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-trash\",style:{color:\"#d23737\"}})})})]},user._id);})})]}):/*#__PURE__*/_jsx(\"h3\",{children:\"There are no users\"})});};export default Crm;","map":{"version":3,"names":["useEffect","useState","Link","deleteUser","getUsers","successMsg","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Crm","_useState","_useState2","_slicedToArray","users","setUsers","_useState3","_useState4","usersChanged","setUsersChanged","render","then","res","data","catch","err","console","log","handleDelete","user","window","confirm","_id","children","length","className","map","firstName","email","password","role","to","concat","onClick","style","color"],"sources":["/Users/lironds/Documents/FullStack/HackerU/Projects/sniffle/sniffle-client/src/components/Crm.tsx"],"sourcesContent":["import { FunctionComponent, useEffect, useState } from \"react\";\nimport User from \"../interfaces/User\";\nimport { Link } from \"react-router-dom\";\nimport { deleteUser, getUsers } from \"../services/usersServices\";\nimport { successMsg } from \"../services/feedbacksServices\";\n\ninterface CrmProps {}\n\nconst Crm: FunctionComponent<CrmProps> = () => {\n  let [users, setUsers] = useState<User[]>([]);\n  let [usersChanged, setUsersChanged] = useState<boolean>(false);\n\n  let render = () => {\n    setUsersChanged(!usersChanged);\n  };\n  useEffect(() => {\n    getUsers()\n      .then((res) => setUsers(res.data))\n      .catch((err) => console.log(err));\n  }, [usersChanged]);\n\n  let handleDelete = (user: User) => {\n    if (window.confirm(\"Are you sure you want to delete this user?\")) {\n      deleteUser(user._id as string)\n        .then((res) => {\n          successMsg(\"User removed successfully\");\n\n          render();\n        })\n        .catch((err) => console.log(err));\n    }\n  };\n\n  return (\n    <>\n      {users.length ? (\n        <table className=\"table\">\n          <thead>\n            <tr className=\"table-success\">\n              <td>User Id</td>\n              <td>Name</td>\n              <td>Mail</td>\n              <td>Password</td>\n              <td>role</td>\n\n              <td>Edit User</td>\n              <td>Delete User</td>\n            </tr>\n          </thead>\n          <tbody>\n            {users.map((user: User) => (\n              <tr key={user._id}>\n                <td>{user._id}</td>\n                <td>{user.firstName}</td>\n                <td>{user.email}</td>\n                <td>{user.password}</td>\n                <td>{user.role}</td>\n                <td>\n                  <Link to={`/users/user-profile/${user._id}`}>\n                    <i className=\"fa-regular fa-pen-to-square\" />\n                  </Link>\n                </td>\n                <td>\n                  <Link to=\"\" onClick={() => handleDelete(user)}>\n                    <i className=\"fa-solid fa-trash\" style={{ color: \"#d23737\" }}></i>\n                  </Link>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      ) : (\n        <h3>There are no users</h3>\n      )}\n    </>\n  );\n};\n\nexport default Crm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}